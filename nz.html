
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="http://d3js.org/d3.v3.js" charset="utf-8"></script>
     <script src="uk.js" charset="utf-8"></script>
     <script src="http://cdnjs.cloudflare.com/ajax/libs/topojson/1.1.0/topojson.min.js" charset="utf-8"></script>
    <script src="PopulationData.js" charset="utf-8"></script>
    <title></title>
</head>
<body>
    
    
    <script>
     //Width and height
            var w = 1000;
            var h = 1000;

            //Define map projection
            var projection = d3.geo.equirectangular()  
							    .scale(3000)
							    .translate([w/2,h/2])
							    .rotate([-180,41]);

            //Define path generator
            var path = d3.geo.path()
                             .projection(projection);

            //Create SVG element
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);    
        
       /*var color = d3.scale.ordinal()
                      .domain([0, d3.max(popInfo2001)])
                      .range("#000000", "#00FF00");
        */
        
        
        var population = [];
        
        for(var i = 0; i < popInfo2001.length; i++) {
           population.push(popInfo2001[i].Population);
        }
        
        var scale = d3.scale.linear()
                    .domain([d3.min(population), d3.max(population)])
                    .range(["#99D6AD", "#000A00"]);
        
        
        
        nzg = topojson.feature(nz, nz.objects['nz-regional-councils-census'])

                //Bind data and create one path per GeoJSON feature
                svg.selectAll("path")
                   .data(nzg.features)
                   .enter()
                   .append("path")
                   .attr("d", path)
                    .attr("data", function(d, i) {
                        return population[i];
                    })
                   .style("fill", function(d, i) {   
                        //return "#00FF00";
                        //d3.select(this).attr
                        return scale(d3.select(this).attr("data"));
                    })
                    .style("opacity", function(d, i) {
                        return "rgba(0, 255, 0, " + 1 / i + ")";
                    })
                   .style("text", function(d, i) {
                   	return i;
                   })
                   .on("mouseover", function(d) {
			            d3.select(this).style("opacity", 0.5);
                    alert(d3.select(this).attr("data"));
			        })
                   .on("mouseout", function(d) {
			            d3.select(this).style("opacity", 1);
			        });
        
    </script>
</body>
</html>